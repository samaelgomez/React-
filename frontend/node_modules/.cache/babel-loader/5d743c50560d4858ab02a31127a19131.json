{"ast":null,"code":"var _jsxFileName = \"/home/samael/server/test/frontend/src/provider/utils/auth.context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case 'set':\n      {\n        const isAdmin = action.userData.email.split(\"@\")[0] === \"user2\";\n        console.log(action);\n        const demoDataToSave = JSON.stringify({\n          email: action.userData.email,\n          password: action.userData.password,\n          token: action.userData.token,\n          rol: isAdmin\n        });\n        localStorage.setItem(\"demoUserData\", demoDataToSave);\n        localStorage.setItem(\"userToken\", action.userData.token);\n        return {\n          email: action.userData.email,\n          password: action.userData.password,\n          token: action.userData.token,\n          rol: isAdmin\n        };\n      }\n\n    case 'delete':\n      {\n        localStorage.removeItem(\"demoUserData\");\n        localStorage.removeItem(\"userToken\");\n        return {\n          email: undefined,\n          password: undefined,\n          token: undefined,\n          rol: undefined\n        };\n      }\n\n    default:\n      {\n        throw new Error(`Unhandled action type: ${action.type}`);\n      }\n  }\n}\n\nfunction UserProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const demoSavedData = localStorage.getItem(\"demoUserData\");\n  const token = localStorage.getItem(\"userToken\");\n  const {\n    email,\n    password\n  } = !token ? {\n    email: undefined,\n    password: undefined,\n    token: undefined\n  } : JSON.parse(demoSavedData);\n  const userData = {\n    email: email,\n    password: password,\n    token: token\n  };\n  const [state, dispatch] = React.useReducer(userReducer, userData);\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 10\n  }, this);\n}\n\n_s(UserProvider, \"wH/xswnhXvetfm5ETej28OfaEM0=\");\n\n_c = UserProvider;\n\nfunction useUserData() {\n  _s2();\n\n  const context = React.useContext(UserContext);\n\n  if (context === undefined) {\n    throw new Error('useUserData must be used within a userProvider');\n  }\n\n  return context;\n}\n\n_s2(useUserData, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport { UserProvider, useUserData };\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","UserContext","createContext","userReducer","state","action","type","isAdmin","userData","email","split","console","log","demoDataToSave","JSON","stringify","password","token","rol","localStorage","setItem","removeItem","undefined","Error","UserProvider","children","demoSavedData","getItem","parse","dispatch","useReducer","value","useUserData","context","useContext"],"sources":["/home/samael/server/test/frontend/src/provider/utils/auth.context.js"],"sourcesContent":["import React from 'react';\n\nconst UserContext = React.createContext();\n\n\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case 'set': {\n      const isAdmin = action.userData.email.split(\"@\")[0] === \"user2\"\n      console.log(action);\n      const demoDataToSave = JSON.stringify({email:action.userData.email,password:action.userData.password,token:action.userData.token,rol:isAdmin})\n      localStorage.setItem(\"demoUserData\",demoDataToSave)\n      localStorage.setItem(\"userToken\",action.userData.token)\n      return {email:action.userData.email,password:action.userData.password,token:action.userData.token,rol:isAdmin}\n    }\n    case 'delete': {\n      localStorage.removeItem(\"demoUserData\")\n      localStorage.removeItem(\"userToken\")\n      return {email:undefined,password:undefined,token:undefined,rol:undefined}\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`)\n    }\n  }\n}\n\nfunction UserProvider({children}) {\n  const demoSavedData = localStorage.getItem(\"demoUserData\") \n  const token = localStorage.getItem(\"userToken\")\n\n  const {email,password} = !token ? {email:undefined,password:undefined,token:undefined} : JSON.parse(demoSavedData)\n  const userData = {email:email,password:password,token:token}\n\n  const [state, dispatch] = React.useReducer(userReducer, userData)\n\n  const value = {state, dispatch}\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>\n}\n\nfunction useUserData() {\n  const context = React.useContext(UserContext)\n  if (context === undefined) {\n    throw new Error('useUserData must be used within a userProvider')\n  }\n  return context\n}\n\nexport {UserProvider, useUserData}"],"mappings":"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"},"metadata":{},"sourceType":"module"}